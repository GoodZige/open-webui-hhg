import{s as Ce,E as Pe,F as Le,a as v,d,f as c,i as S,g as p,n as de,e as g,c as _,Q as wt,B as at,k as R,o as X,y as xe,A as Ve,p as it,j as qe,N as lt,u as ie,t as _e,b as ve,h as we,C as Ae,z as $t,H as rt,q as bt,M as kt}from"../chunks/scheduler.CHqjxavM.js";import{S as We,i as Ue,t as D,g as Ne,c as Me,a as V,b as L,d as K,m as O,e as j,f as Fe}from"../chunks/index.Cjx-5OY6.js";import{F as yt}from"../chunks/fuse.CU2r43ac.js";import{t as J}from"../chunks/Toaster.svelte_svelte_type_style_lang.NefCtMfx.js";import{g as It}from"../chunks/entry.BeaNDCfp.js";import{p as Et}from"../chunks/stores.DXXqgOfn.js";import{s as Dt,n as xt}from"../chunks/index.H8ql2Fza.js";import{u as Vt,a as Ft}from"../chunks/index.Ccbr7YXp.js";import{b as Ct,r as Tt,e as Nt,f as Mt,u as Bt,h as St,g as zt}from"../chunks/index.DwaxdADu.js";import{t as At}from"../chunks/index.NRlecBS4.js";import{n as ut,v as Wt}from"../chunks/index.Bl8AKUxi.js";import{S as Ut}from"../chunks/Spinner.BnJ9ysqs.js";import{e as dt}from"../chunks/each.CCRIbD_e.js";import{F as Ht}from"../chunks/FileItem.BzjBLAVY.js";import{A as Pt,D as Lt}from"../chunks/Drawer.BoN98nC5.js";import"../chunks/updater.Bfy-25tm.js";import{D as Kt,M as tt}from"../chunks/Dropdown.DGdPKWf2.js";import{b as Ot}from"../chunks/menu-trigger.OGZQyMrC.js";import{f as jt}from"../chunks/index.BFuekP1B.js";import{T as st}from"../chunks/Tooltip.Ckuvvm8c.js";import{F as qt}from"../chunks/FolderOpen.BDFow6SB.js";import"../chunks/relativeTime.BDz4fsXT.js";import{M as Rt}from"../chunks/Modal.BTvzYrvL.js";import{R as ct,V as Xt}from"../chunks/RichTextInput.BUUacnhy.js";import{X as Qt}from"../chunks/XMark.C3tTP9TD.js";import{M as Yt}from"../chunks/Mic.CnS2_5fI.js";import{C as Gt}from"../chunks/ConfirmDialog.BkASNw-x.js";import{C as Jt}from"../chunks/ChevronLeft.BlTNTt5T.js";import{A as Zt,L as el}from"../chunks/AccessControlModal.DUvqCds6.js";function tl(s){let e,t;return{c(){e=Pe("svg"),t=Pe("path"),this.h()},l(l){e=Le(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=v(e);t=Le(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){S(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:de,o:de,d(l){l&&d(e)}}}function ll(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,r=a.strokeWidth)},[l,r]}class rl extends We{constructor(e){super(),Ue(this,e,ll,tl,Ce,{className:0,strokeWidth:1})}}function ht(s,e,t){const l=s.slice();return l[6]=e[t],l}function mt(s){var o,i,f,u,$,I;let e,t,l,r;function a(){return s[4](s[6])}function n(){return s[5](s[6])}return t=new Ht({props:{className:"w-full",colorClassName:(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition",small:s[2],item:s[6],name:((o=s[6])==null?void 0:o.name)??((f=(i=s[6])==null?void 0:i.meta)==null?void 0:f.name),type:"file",size:((u=s[6])==null?void 0:u.size)??((I=($=s[6])==null?void 0:$.meta)==null?void 0:I.size)??"",loading:s[6].status==="uploading",dismissible:!0}}),t.$on("click",a),t.$on("dismiss",n),{c(){e=g("div"),L(t.$$.fragment),l=R(),this.h()},l(k){e=_(k,"DIV",{class:!0});var x=v(e);K(t.$$.fragment,x),l=X(x),x.forEach(d),this.h()},h(){c(e,"class","mt-1 px-2")},m(k,x){S(k,e,x),O(t,e,null),p(e,l),r=!0},p(k,x){var T,N,W,C,z,y;s=k;const b={};x&3&&(b.colorClassName=(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition"),x&4&&(b.small=s[2]),x&2&&(b.item=s[6]),x&2&&(b.name=((T=s[6])==null?void 0:T.name)??((W=(N=s[6])==null?void 0:N.meta)==null?void 0:W.name)),x&2&&(b.size=((C=s[6])==null?void 0:C.size)??((y=(z=s[6])==null?void 0:z.meta)==null?void 0:y.size)??""),x&2&&(b.loading=s[6].status==="uploading"),t.$set(b)},i(k){r||(D(t.$$.fragment,k),r=!0)},o(k){V(t.$$.fragment,k),r=!1},d(k){k&&d(e),j(t)}}}function sl(s){let e,t,l=dt(s[1]),r=[];for(let n=0;n<l.length;n+=1)r[n]=mt(ht(s,l,n));const a=n=>V(r[n],1,1,()=>{r[n]=null});return{c(){e=g("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=_(n,"DIV",{class:!0});var o=v(e);for(let i=0;i<r.length;i+=1)r[i].l(o);o.forEach(d),this.h()},h(){c(e,"class","max-h-full flex flex-col w-full")},m(n,o){S(n,e,o);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(n,[o]){if(o&15){l=dt(n[1]);let i;for(i=0;i<l.length;i+=1){const f=ht(n,l,i);r[i]?(r[i].p(f,o),D(r[i],1)):(r[i]=mt(f),r[i].c(),D(r[i],1),r[i].m(e,null))}for(Ne(),i=l.length;i<r.length;i+=1)a(i);Me()}},i(n){if(!t){for(let o=0;o<l.length;o+=1)D(r[o]);t=!0}},o(n){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)V(r[o]);t=!1},d(n){n&&d(e),wt(r,n)}}}function nl(s,e,t){const l=at();let{selectedFileId:r=null}=e,{files:a=[]}=e,{small:n=!1}=e;const o=f=>{f.status!=="uploading"&&l("click",f.id)},i=f=>{f.status!=="uploading"&&l("delete",f.id)};return s.$$set=f=>{"selectedFileId"in f&&t(0,r=f.selectedFileId),"files"in f&&t(1,a=f.files),"small"in f&&t(2,n=f.small)},[r,a,n,l,o,i]}class ol extends We{constructor(e){super(),Ue(this,e,nl,sl,Ce,{selectedFileId:0,files:1,small:2})}}function al(s){let e,t;return{c(){e=Pe("svg"),t=Pe("path"),this.h()},l(l){e=Le(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=v(e);t=Le(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){S(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:de,o:de,d(l){l&&d(e)}}}function il(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,r=a.strokeWidth)},[l,r]}class cl extends We{constructor(e){super(),Ue(this,e,il,al,Ce,{className:0,strokeWidth:1})}}function fl(s){let e,t;return{c(){e=Pe("svg"),t=Pe("path"),this.h()},l(l){e=Le(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=v(e);t=Le(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){S(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:de,o:de,d(l){l&&d(e)}}}function ul(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=a=>{"className"in a&&t(0,l=a.className),"strokeWidth"in a&&t(1,r=a.strokeWidth)},[l,r]}class dl extends We{constructor(e){super(),Ue(this,e,ul,fl,Ce,{className:0,strokeWidth:1})}}function hl(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,r;return{c(){e=g("button"),e.innerHTML=t,this.h()},l(a){e=_(a,"BUTTON",{class:!0,"data-svelte-h":!0}),lt(e)!=="svelte-144k6kh"&&(e.innerHTML=t),this.h()},h(){c(e,"class","p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1")},m(a,n){S(a,e,n),l||(r=ie(e,"click",s[9]),l=!0)},p:de,d(a){a&&d(e),l=!1,r()}}}function ml(s){let e,t;return e=new st({props:{content:s[2].t("Add Content"),$$slots:{default:[hl]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){O(e,l,r),t=!0},p(l,r){const a={};r&4&&(a.content=l[2].t("Add Content")),r&4098&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function pl(s){let e,t,l,r=s[2].t("Upload files")+"",a,n;return e=new rl({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=R(),l=g("div"),a=_e(r),this.h()},l(o){K(e.$$.fragment,o),t=X(o),l=_(o,"DIV",{class:!0});var i=v(l);a=ve(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){O(e,o,i),S(o,t,i),S(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Upload files")+"")&&we(a,r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),j(e,o)}}}function gl(s){let e,t,l,r=s[2].t("Upload directory")+"",a,n;return e=new qt({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=R(),l=g("div"),a=_e(r),this.h()},l(o){K(e.$$.fragment,o),t=X(o),l=_(o,"DIV",{class:!0});var i=v(l);a=ve(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){O(e,o,i),S(o,t,i),S(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Upload directory")+"")&&we(a,r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),j(e,o)}}}function _l(s){let e,t,l,r=s[2].t("Sync directory")+"",a,n;return e=new dl({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=R(),l=g("div"),a=_e(r),this.h()},l(o){K(e.$$.fragment,o),t=X(o),l=_(o,"DIV",{class:!0});var i=v(l);a=ve(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){O(e,o,i),S(o,t,i),S(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Sync directory")+"")&&we(a,r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),j(e,o)}}}function vl(s){let e,t;return e=new tt({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[_l]},$$scope:{ctx:s}}}),e.$on("click",s[7]),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){O(e,l,r),t=!0},p(l,r){const a={};r&4100&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function wl(s){let e,t,l,r=s[2].t("Add text content")+"",a,n;return e=new cl({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=R(),l=g("div"),a=_e(r),this.h()},l(o){K(e.$$.fragment,o),t=X(o),l=_(o,"DIV",{class:!0});var i=v(l);a=ve(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(o,i){O(e,o,i),S(o,t,i),S(o,l,i),p(l,a),n=!0},p(o,i){(!n||i&4)&&r!==(r=o[2].t("Add text content")+"")&&we(a,r)},i(o){n||(D(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){o&&(d(t),d(l)),j(e,o)}}}function $l(s){let e,t,l,r,a,n,o,i;return e=new tt({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[pl]},$$scope:{ctx:s}}}),e.$on("click",s[5]),l=new tt({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[gl]},$$scope:{ctx:s}}}),l.$on("click",s[6]),a=new st({props:{content:s[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files."),className:"w-full",$$slots:{default:[vl]},$$scope:{ctx:s}}}),o=new tt({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[wl]},$$scope:{ctx:s}}}),o.$on("click",s[8]),{c(){L(e.$$.fragment),t=R(),L(l.$$.fragment),r=R(),L(a.$$.fragment),n=R(),L(o.$$.fragment)},l(f){K(e.$$.fragment,f),t=X(f),K(l.$$.fragment,f),r=X(f),K(a.$$.fragment,f),n=X(f),K(o.$$.fragment,f)},m(f,u){O(e,f,u),S(f,t,u),O(l,f,u),S(f,r,u),O(a,f,u),S(f,n,u),O(o,f,u),i=!0},p(f,u){const $={};u&4100&&($.$$scope={dirty:u,ctx:f}),e.$set($);const I={};u&4100&&(I.$$scope={dirty:u,ctx:f}),l.$set(I);const k={};u&4&&(k.content=f[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files.")),u&4100&&(k.$$scope={dirty:u,ctx:f}),a.$set(k);const x={};u&4100&&(x.$$scope={dirty:u,ctx:f}),o.$set(x)},i(f){i||(D(e.$$.fragment,f),D(l.$$.fragment,f),D(a.$$.fragment,f),D(o.$$.fragment,f),i=!0)},o(f){V(e.$$.fragment,f),V(l.$$.fragment,f),V(a.$$.fragment,f),V(o.$$.fragment,f),i=!1},d(f){f&&(d(t),d(r),d(n)),j(e,f),j(l,f),j(a,f),j(o,f)}}}function bl(s){let e,t,l;return t=new Ot({props:{class:"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-sm",sideOffset:4,side:"bottom",align:"end",transition:jt,$$slots:{default:[$l]},$$scope:{ctx:s}}}),{c(){e=g("div"),L(t.$$.fragment),this.h()},l(r){e=_(r,"DIV",{slot:!0});var a=v(e);K(t.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"slot","content")},m(r,a){S(r,e,a),O(t,e,null),l=!0},p(r,a){const n={};a&4100&&(n.$$scope={dirty:a,ctx:r}),t.$set(n)},i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){V(t.$$.fragment,r),l=!1},d(r){r&&d(e),j(t)}}}function kl(s){let e,t,l;function r(n){s[10](n)}let a={align:"end",$$slots:{content:[bl],default:[ml]},$$scope:{ctx:s}};return s[1]!==void 0&&(a.show=s[1]),e=new Kt({props:a}),xe.push(()=>Fe(e,"show",r)),e.$on("change",s[11]),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){O(e,n,o),l=!0},p(n,[o]){const i={};o&4102&&(i.$$scope={dirty:o,ctx:n}),!t&&o&2&&(t=!0,i.show=n[1],Ve(()=>t=!1)),e.$set(i)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function yl(s,e,t){let l;const r=at(),a=it("i18n");qe(s,a,b=>t(2,l=b));let{onClose:n=()=>{}}=e,o=!1;const i=()=>{r("upload",{type:"files"})},f=()=>{r("upload",{type:"directory"})},u=()=>{r("sync",{type:"directory"})},$=()=>{r("upload",{type:"text"})},I=b=>{b.stopPropagation(),t(1,o=!0)};function k(b){o=b,t(1,o)}const x=b=>{b.detail===!1&&n()};return s.$$set=b=>{"onClose"in b&&t(0,n=b.onClose)},[n,o,l,r,a,i,f,u,$,I,k,x]}class Il extends We{constructor(e){super(),Ue(this,e,yl,kl,Ce,{onClose:0})}}function El(s){let e,t;return e=new st({props:{content:s[4].t("Voice Input"),$$slots:{default:[xl]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){O(e,l,r),t=!0},p(l,r){const a={};r&16&&(a.content=l[4].t("Voice Input")),r&65560&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Dl(s){let e,t,l,r;function a(o){s[10](o)}let n={className:"p-1"};return s[3]!==void 0&&(n.recording=s[3]),t=new Xt({props:n}),xe.push(()=>Fe(t,"recording",a)),t.$on("cancel",s[11]),t.$on("confirm",s[12]),{c(){e=g("div"),L(t.$$.fragment),this.h()},l(o){e=_(o,"DIV",{class:!0});var i=v(e);K(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","max-w-full w-full")},m(o,i){S(o,e,i),O(t,e,null),r=!0},p(o,i){const f={};!l&&i&8&&(l=!0,f.recording=o[3],Ve(()=>l=!1)),t.$set(f)},i(o){r||(D(t.$$.fragment,o),r=!0)},o(o){V(t.$$.fragment,o),r=!1},d(o){o&&d(e),j(t)}}}function xl(s){let e,t,l,r,a;return t=new Yt({props:{className:"size-5"}}),{c(){e=g("button"),L(t.$$.fragment),this.h()},l(n){e=_(n,"BUTTON",{class:!0,type:!0});var o=v(e);K(t.$$.fragment,o),o.forEach(d),this.h()},h(){c(e,"class","p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full"),c(e,"type","button")},m(n,o){S(n,e,o),O(t,e,null),l=!0,r||(a=ie(e,"click",s[13]),r=!0)},p:de,i(n){l||(D(t.$$.fragment,n),l=!0)},o(n){V(t.$$.fragment,n),l=!1},d(n){n&&d(e),j(t),r=!1,a()}}}function Vl(s){let e,t=s[4].t("Save")+"",l;return{c(){e=g("button"),l=_e(t),this.h()},l(r){e=_(r,"BUTTON",{class:!0,type:!0});var a=v(e);l=ve(a,t),a.forEach(d),this.h()},h(){c(e,"class","px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full"),c(e,"type","submit")},m(r,a){S(r,e,a),p(e,l)},p(r,a){a&16&&t!==(t=r[4].t("Save")+"")&&we(l,t)},d(r){r&&d(e)}}}function Fl(s){let e,t,l,r,a,n,o,i,f,u,$,I,k,x,b,T,N,W,C,z,y,U,Q,m,w,A,Y;l=new Qt({props:{className:"size-3.5"}});function P(M){s[9](M)}let oe={placeholder:s[4].t("Write something..."),preserveBreaks:!0};s[2]!==void 0&&(oe.value=s[2]),b=new ct({props:oe}),xe.push(()=>Fe(b,"value",P));const ge=[Dl,El],ee=[];function se(M,G){return M[3]?0:1}return z=se(s),y=ee[z]=ge[z](s),m=new st({props:{content:s[4].t("Save"),$$slots:{default:[Vl]},$$scope:{ctx:s}}}),{c(){e=g("div"),t=g("button"),L(l.$$.fragment),r=R(),a=g("div"),n=g("form"),o=g("div"),i=g("div"),f=g("div"),u=g("div"),$=g("input"),k=R(),x=g("div"),L(b.$$.fragment),N=R(),W=g("div"),C=g("div"),y.c(),U=R(),Q=g("div"),L(m.$$.fragment),this.h()},l(M){e=_(M,"DIV",{class:!0});var G=v(e);t=_(G,"BUTTON",{class:!0,type:!0});var ce=v(t);K(l.$$.fragment,ce),ce.forEach(d),G.forEach(d),r=X(M),a=_(M,"DIV",{class:!0});var re=v(a);n=_(re,"FORM",{class:!0});var he=v(n);o=_(he,"DIV",{class:!0});var me=v(o);i=_(me,"DIV",{class:!0});var be=v(i);f=_(be,"DIV",{class:!0});var Be=v(f);u=_(Be,"DIV",{class:!0});var fe=v(u);$=_(fe,"INPUT",{class:!0,type:!0,placeholder:!0}),fe.forEach(d),Be.forEach(d),k=X(be),x=_(be,"DIV",{class:!0});var ue=v(x);K(b.$$.fragment,ue),ue.forEach(d),be.forEach(d),me.forEach(d),N=X(he),W=_(he,"DIV",{class:!0});var $e=v(W);C=_($e,"DIV",{class:!0});var Se=v(C);y.l(Se),Se.forEach(d),U=X($e),Q=_($e,"DIV",{class:!0});var te=v(Q);K(m.$$.fragment,te),te.forEach(d),$e.forEach(d),he.forEach(d),re.forEach(d),this.h()},h(){c(t,"class","self-center dark:text-white"),c(t,"type","button"),c(e,"class","absolute top-0 right-0 p-5"),c($,"class","w-full text-3xl font-semibold bg-transparent outline-hidden svelte-1vx7r9s"),c($,"type","text"),c($,"placeholder",I=s[4].t("Title")),$.required=!0,c(u,"class","w-full"),c(f,"class","shrink-0 w-full flex justify-between items-center"),c(x,"class","flex-1 w-full h-full"),c(i,"class","max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2"),c(o,"class","flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4"),c(C,"class",""),c(Q,"class","shrink-0"),c(W,"class","flex flex-row items-center justify-end text-sm font-medium shrink-0 mt-1 p-4 gap-1.5"),c(n,"class","flex flex-col w-full h-full"),c(a,"class","flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200")},m(M,G){S(M,e,G),p(e,t),O(l,t,null),S(M,r,G),S(M,a,G),p(a,n),p(n,o),p(o,i),p(i,f),p(f,u),p(u,$),Ae($,s[1]),p(i,k),p(i,x),O(b,x,null),p(n,N),p(n,W),p(W,C),ee[z].m(C,null),p(W,U),p(W,Q),O(m,Q,null),w=!0,A||(Y=[ie(t,"click",s[7]),ie($,"input",s[8]),ie(n,"submit",$t(s[14]))],A=!0)},p(M,G){(!w||G&16&&I!==(I=M[4].t("Title")))&&c($,"placeholder",I),G&2&&$.value!==M[1]&&Ae($,M[1]);const ce={};G&16&&(ce.placeholder=M[4].t("Write something...")),!T&&G&4&&(T=!0,ce.value=M[2],Ve(()=>T=!1)),b.$set(ce);let re=z;z=se(M),z===re?ee[z].p(M,G):(Ne(),V(ee[re],1,1,()=>{ee[re]=null}),Me(),y=ee[z],y?y.p(M,G):(y=ee[z]=ge[z](M),y.c()),D(y,1),y.m(C,null));const he={};G&16&&(he.content=M[4].t("Save")),G&65552&&(he.$$scope={dirty:G,ctx:M}),m.$set(he)},i(M){w||(D(l.$$.fragment,M),D(b.$$.fragment,M),D(y),D(m.$$.fragment,M),w=!0)},o(M){V(l.$$.fragment,M),V(b.$$.fragment,M),V(y),V(m.$$.fragment,M),w=!1},d(M){M&&(d(e),d(r),d(a)),j(l),j(b),ee[z].d(),j(m),A=!1,rt(Y)}}}function Cl(s){let e,t,l;function r(n){s[15](n)}let a={size:"full",containerClassName:"",className:"h-full bg-white dark:bg-gray-900",$$slots:{default:[Fl]},$$scope:{ctx:s}};return s[0]!==void 0&&(a.show=s[0]),e=new Rt({props:a}),xe.push(()=>Fe(e,"show",r)),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){O(e,n,o),l=!0},p(n,[o]){const i={};o&65567&&(i.$$scope={dirty:o,ctx:n}),!t&&o&1&&(t=!0,i.show=n[0],Ve(()=>t=!1)),e.$set(i)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function Tl(s,e,t){let l;const r=it("i18n");qe(s,r,C=>t(4,l=C));const a=at();let{show:n=!1}=e,o="Untitled",i="",f=!1;const u=()=>{t(0,n=!1)};function $(){o=this.value,t(1,o)}function I(C){i=C,t(2,i)}function k(C){f=C,t(3,f)}const x=()=>{t(3,f=!1)},b=C=>{const{text:z,filename:y}=C.detail;t(2,i=`${i}${z} `),t(3,f=!1)},T=async()=>{try{let C=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(z){return J.error(l.t("Permission denied when accessing microphone: {{error}}",{error:z})),null});C&&(t(3,f=!0),C.getTracks().forEach(y=>y.stop())),C=null}catch{J.error(l.t("Permission denied when accessing microphone"))}},N=()=>{if(o.trim()===""||i.trim()===""){J.error(l.t("Please fill in all fields.")),t(1,o=o.trim()),t(2,i=i.trim());return}a("submit",{name:o,content:i}),t(0,n=!1),t(1,o=""),t(2,i="")};function W(C){n=C,t(0,n)}return s.$$set=C=>{"show"in C&&t(0,n=C.show)},[n,o,i,f,l,r,a,u,$,I,k,x,b,T,N,W]}class Nl extends We{constructor(e){super(),Ue(this,e,Tl,Cl,Ce,{show:0})}}function pt(s){let e,t,l,r,a,n,o;return a=new Pt({props:{$$slots:{default:[Ml]},$$scope:{ctx:s}}}),{c(){e=g("div"),t=g("div"),l=g("div"),r=g("div"),L(a.$$.fragment),this.h()},l(i){e=_(i,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var f=v(e);t=_(f,"DIV",{class:!0});var u=v(t);l=_(u,"DIV",{class:!0});var $=v(l);r=_($,"DIV",{class:!0});var I=v(r);K(a.$$.fragment,I),I.forEach(d),$.forEach(d),u.forEach(d),f.forEach(d),this.h()},h(){c(r,"class","max-w-md"),c(l,"class","m-auto pt-64 flex flex-col justify-center"),c(t,"class","absolute w-full h-full backdrop-blur-sm bg-gray-800/40 flex justify-center"),c(e,"class",n="fixed "+(s[13]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),c(e,"id","dropzone"),c(e,"role","region"),c(e,"aria-label","Drag and Drop Container")},m(i,f){S(i,e,f),p(e,t),p(t,l),p(l,r),O(a,r,null),o=!0},p(i,f){const u={};f[2]&16&&(u.$$scope={dirty:f,ctx:i}),a.$set(u),(!o||f[0]&8192&&n!==(n="fixed "+(i[13]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&c(e,"class",n)},i(i){o||(D(a.$$.fragment,i),o=!0)},o(i){V(a.$$.fragment,i),o=!1},d(i){i&&d(e),j(a)}}}function Ml(s){let e,t="Drop any files here to add to my documents";return{c(){e=g("div"),e.textContent=t,this.h()},l(l){e=_(l,"DIV",{class:!0,"data-svelte-h":!0}),lt(e)!=="svelte-19eg75t"&&(e.textContent=t),this.h()},h(){c(e,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(l,r){S(l,e,r)},p:de,d(l){l&&d(e)}}}function Bl(s){let e,t;return e=new Ut({}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){O(e,l,r),t=!0},p:de,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Sl(s){let e,t,l,r,a,n,o,i,f,u,$,I,k,x,b,T,N=s[12].t("Access")+"",W,C,z,y,U,Q,m,w,A,Y,P,oe,ge='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',ee,se,M,G,ce,re,he,me,be='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="#8e8e8e" class="w-4 h-4"><path fill-rule="evenodd" d="M938.688 1024V0H1024v1024h-85.312zM0 768h853.312v256H0v-256z m85.312 85.312v85.376H768v-85.376H85.312zM0 0h853.312v256H0V0z m85.312 85.312v85.376H768V85.312H85.312zM170.688 384h682.624v256H170.688V384zM256 469.312v85.376h512V469.312H256z" clip-rule="evenodd"></path></svg>',Be,fe,ue,$e,Se,te,ae,Te,Ke,Re;function nt(E){s[32](E)}function ot(E){s[33](E)}let Oe={onChange:s[31],accessRoles:["read","write"]};s[7]!==void 0&&(Oe.show=s[7]),s[0].access_control!==void 0&&(Oe.accessControl=s[0].access_control),e=new Zt({props:Oe}),xe.push(()=>Fe(e,"show",nt)),xe.push(()=>Fe(e,"accessControl",ot)),x=new el({props:{strokeWidth:"2.5",className:"size-3.5"}}),re=new Il({}),re.$on("upload",s[41]),re.$on("sync",s[42]);const Xe=[Al,zl],ke=[];function Qe(E,Z){return E[9].length>0?0:1}fe=Qe(s),ue=ke[fe]=Xe[fe](s);const Ye=[Ul,Wl],ye=[];function Ge(E,Z){return E[3]?0:!E[3]&&E[2]!==null?1:-1}return~(te=Ge(s))&&(ae=ye[te]=Ye[te](s)),{c(){L(e.$$.fragment),r=R(),a=g("div"),n=g("div"),o=g("div"),i=g("div"),f=g("div"),u=g("input"),$=R(),I=g("div"),k=g("button"),L(x.$$.fragment),b=R(),T=g("div"),W=_e(N),C=R(),z=g("div"),y=g("input"),U=R(),Q=g("div"),m=g("div"),w=g("div"),A=g("div"),Y=g("div"),P=g("div"),oe=g("div"),oe.innerHTML=ge,ee=R(),se=g("input"),G=R(),ce=g("div"),L(re.$$.fragment),he=R(),me=g("button"),me.innerHTML=be,Be=R(),ue.c(),Se=R(),ae&&ae.c(),this.h()},l(E){K(e.$$.fragment,E),r=X(E),a=_(E,"DIV",{class:!0});var Z=v(a);n=_(Z,"DIV",{class:!0});var ze=v(n);o=_(ze,"DIV",{class:!0});var Ie=v(o);i=_(Ie,"DIV",{class:!0});var Ee=v(i);f=_(Ee,"DIV",{class:!0});var Je=v(f);u=_(Je,"INPUT",{type:!0,class:!0,placeholder:!0}),Je.forEach(d),$=X(Ee),I=_(Ee,"DIV",{class:!0});var Ze=v(I);k=_(Ze,"BUTTON",{class:!0,type:!0});var He=v(k);K(x.$$.fragment,He),b=X(He),T=_(He,"DIV",{class:!0});var et=v(T);W=ve(et,N),et.forEach(d),He.forEach(d),Ze.forEach(d),Ee.forEach(d),C=X(Ie),z=_(Ie,"DIV",{class:!0});var h=v(z);y=_(h,"INPUT",{type:!0,class:!0,placeholder:!0}),h.forEach(d),Ie.forEach(d),ze.forEach(d),Z.forEach(d),U=X(E),Q=_(E,"DIV",{class:!0});var F=v(Q);m=_(F,"DIV",{class:!0,id:!0});var H=v(m);w=_(H,"DIV",{class:!0});var B=v(w);A=_(B,"DIV",{class:!0});var q=v(A);Y=_(q,"DIV",{class:!0});var pe=v(Y);P=_(pe,"DIV",{class:!0});var ne=v(P);oe=_(ne,"DIV",{class:!0,"data-svelte-h":!0}),lt(oe)!=="svelte-1x0w90u"&&(oe.innerHTML=ge),ee=X(ne),se=_(ne,"INPUT",{class:!0,placeholder:!0}),G=X(ne),ce=_(ne,"DIV",{});var le=v(ce);K(re.$$.fragment,le),le.forEach(d),he=X(ne),me=_(ne,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),lt(me)!=="svelte-1auh6ln"&&(me.innerHTML=be),ne.forEach(d),pe.forEach(d),Be=X(q),ue.l(q),q.forEach(d),B.forEach(d),H.forEach(d),Se=X(F),ae&&ae.l(F),F.forEach(d),this.h()},h(){c(u,"type","text"),c(u,"class","text-left w-full font-semibold text-2xl font-primary bg-transparent outline-hidden"),c(u,"placeholder","Knowledge Name"),c(f,"class","w-full"),c(T,"class","text-sm font-medium shrink-0"),c(k,"class","bg-gray-50 hover:bg-gray-100 text-black dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white transition px-2 py-1 rounded-full flex gap-1 items-center"),c(k,"type","button"),c(I,"class","self-center shrink-0"),c(i,"class","flex items-center justify-between w-full px-0.5 mb-1"),c(y,"type","text"),c(y,"class","text-left text-xs w-full text-gray-500 bg-transparent outline-hidden"),c(y,"placeholder","Knowledge Description"),c(z,"class","flex w-full px-1"),c(o,"class","flex-1"),c(n,"class","flex w-full"),c(a,"class","w-full mb-2.5"),c(oe,"class","self-center ml-1 mr-3"),c(se,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent"),c(se,"placeholder",M=s[12].t("Search Collection")),c(me,"class","bg-gray-50 hover:bg-gray-100 text-black dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white transition px-2 py-1 rounded-full flex gap-1 items-center"),c(me,"type","button"),c(P,"class","flex mb-0.5"),c(Y,"class","px-3"),c(A,"class","w-full h-full flex flex-col"),c(w,"class","flex flex-col w-full space-x-2 rounded-lg h-full"),c(m,"class",$e=(s[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850 toggle-Class-zsk"),c(m,"id","toggle-Class"),c(Q,"class","flex flex-row flex-1 h-full max-h-full pb-2.5 gap-3")},m(E,Z){O(e,E,Z),S(E,r,Z),S(E,a,Z),p(a,n),p(n,o),p(o,i),p(i,f),p(f,u),Ae(u,s[0].name),p(i,$),p(i,I),p(I,k),O(x,k,null),p(k,b),p(k,T),p(T,W),p(o,C),p(o,z),p(z,y),Ae(y,s[0].description),S(E,U,Z),S(E,Q,Z),p(Q,m),p(m,w),p(w,A),p(A,Y),p(Y,P),p(P,oe),p(P,ee),p(P,se),Ae(se,s[1]),p(P,G),p(P,ce),O(re,ce,null),p(P,he),p(P,me),p(A,Be),ke[fe].m(A,null),p(Q,Se),~te&&ye[te].m(Q,null),Te=!0,Ke||(Re=[ie(u,"input",s[34]),ie(u,"input",s[35]),ie(k,"click",s[36]),ie(y,"input",s[37]),ie(y,"input",s[38]),ie(se,"input",s[39]),ie(se,"focus",s[40]),ie(me,"click",s[43])],Ke=!0)},p(E,Z){const ze={};!t&&Z[0]&128&&(t=!0,ze.show=E[7],Ve(()=>t=!1)),!l&&Z[0]&1&&(l=!0,ze.accessControl=E[0].access_control,Ve(()=>l=!1)),e.$set(ze),Z[0]&1&&u.value!==E[0].name&&Ae(u,E[0].name),(!Te||Z[0]&4096)&&N!==(N=E[12].t("Access")+"")&&we(W,N),Z[0]&1&&y.value!==E[0].description&&Ae(y,E[0].description),(!Te||Z[0]&4096&&M!==(M=E[12].t("Search Collection")))&&c(se,"placeholder",M),Z[0]&2&&se.value!==E[1]&&Ae(se,E[1]);let Ie=fe;fe=Qe(E),fe===Ie?ke[fe].p(E,Z):(Ne(),V(ke[Ie],1,1,()=>{ke[Ie]=null}),Me(),ue=ke[fe],ue?ue.p(E,Z):(ue=ke[fe]=Xe[fe](E),ue.c()),D(ue,1),ue.m(A,null)),(!Te||Z[0]&8&&$e!==($e=(E[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850 toggle-Class-zsk"))&&c(m,"class",$e);let Ee=te;te=Ge(E),te===Ee?~te&&ye[te].p(E,Z):(ae&&(Ne(),V(ye[Ee],1,1,()=>{ye[Ee]=null}),Me()),~te?(ae=ye[te],ae?ae.p(E,Z):(ae=ye[te]=Ye[te](E),ae.c()),D(ae,1),ae.m(Q,null)):ae=null)},i(E){Te||(D(e.$$.fragment,E),D(x.$$.fragment,E),D(re.$$.fragment,E),D(ue),D(ae),Te=!0)},o(E){V(e.$$.fragment,E),V(x.$$.fragment,E),V(re.$$.fragment,E),V(ue),V(ae),Te=!1},d(E){E&&(d(r),d(a),d(U),d(Q)),j(e,E),j(x),j(re),ke[fe].d(),~te&&ye[te].d(),Ke=!1,rt(Re)}}}function zl(s){let e,t,l=s[12].t("No content found")+"",r;return{c(){e=g("div"),t=g("div"),r=_e(l),this.h()},l(a){e=_(a,"DIV",{class:!0});var n=v(e);t=_(n,"DIV",{});var o=v(t);r=ve(o,l),o.forEach(d),n.forEach(d),this.h()},h(){c(e,"class","my-3 flex flex-col justify-center text-center text-gray-500 text-xs")},m(a,n){S(a,e,n),p(e,t),p(t,r)},p(a,n){n[0]&4096&&l!==(l=a[12].t("No content found")+"")&&we(r,l)},i:de,o:de,d(a){a&&d(e)}}}function Al(s){let e,t,l;return t=new ol({props:{small:!0,files:s[9],selectedFileId:s[2]}}),t.$on("click",s[44]),t.$on("delete",s[45]),{c(){e=g("div"),L(t.$$.fragment),this.h()},l(r){e=_(r,"DIV",{class:!0});var a=v(e);K(t.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"class","flex overflow-y-auto h-full w-full scrollbar-hidden text-xs")},m(r,a){S(r,e,a),O(t,e,null),l=!0},p(r,a){const n={};a[0]&512&&(n.files=r[9]),a[0]&4&&(n.selectedFileId=r[2]),t.$set(n)},i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){V(t.$$.fragment,r),l=!1},d(r){r&&d(e),j(t)}}}function Wl(s){let e,t;return e=new Lt({props:{className:"h-full",show:s[2]!==null,$$slots:{default:[Hl]},$$scope:{ctx:s}}}),e.$on("close",s[52]),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){O(e,l,r),t=!0},p(l,r){const a={};r[0]&4&&(a.show=l[2]!==null),r[0]&5124|r[2]&16&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Ul(s){let e,t,l,r;const a=[Ll,Pl],n=[];function o(i,f){return i[10]?0:1}return t=o(s),l=n[t]=a[t](s),{c(){e=g("div"),l.c(),this.h()},l(i){e=_(i,"DIV",{class:!0});var f=v(e);l.l(f),f.forEach(d),this.h()},h(){c(e,"class","flex-1 flex justify-start w-full h-full max-h-full")},m(i,f){S(i,e,f),n[t].m(e,null),r=!0},p(i,f){let u=t;t=o(i),t===u?n[t].p(i,f):(Ne(),V(n[u],1,1,()=>{n[u]=null}),Me(),l=n[t],l?l.p(i,f):(l=n[t]=a[t](i),l.c()),D(l,1),l.m(e,null))},i(i){r||(D(l),r=!0)},o(i){V(l),r=!1},d(i){i&&d(e),n[t].d()}}}function gt(s){let e,t,l;function r(n){s[51](n)}let a={className:"input-prose-sm",placeholder:s[12].t("Add content here"),preserveBreaks:!0};return s[10].data.content!==void 0&&(a.value=s[10].data.content),e=new ct({props:a}),xe.push(()=>Fe(e,"value",r)),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){O(e,n,o),l=!0},p(n,o){const i={};o[0]&4096&&(i.placeholder=n[12].t("Add content here")),!t&&o[0]&1024&&(t=!0,i.value=n[10].data.content,Ve(()=>t=!1)),e.$set(i)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function Hl(s){var Q,m;let e,t,l,r,a,n,o,i,f=((m=(Q=s[10])==null?void 0:Q.meta)==null?void 0:m.name)+"",u,$,I,k,x=s[12].t("Save")+"",b,T,N,W=s[10].id,C,z,y;n=new Jt({props:{strokeWidth:"2.5"}});let U=gt(s);return{c(){e=g("div"),t=g("div"),l=g("div"),r=g("div"),a=g("button"),L(n.$$.fragment),o=R(),i=g("div"),u=_e(f),$=R(),I=g("div"),k=g("button"),b=_e(x),T=R(),N=g("div"),U.c(),this.h()},l(w){e=_(w,"DIV",{class:!0});var A=v(e);t=_(A,"DIV",{class:!0});var Y=v(t);l=_(Y,"DIV",{class:!0});var P=v(l);r=_(P,"DIV",{class:!0});var oe=v(r);a=_(oe,"BUTTON",{class:!0});var ge=v(a);K(n.$$.fragment,ge),ge.forEach(d),oe.forEach(d),o=X(P),i=_(P,"DIV",{class:!0});var ee=v(i);u=ve(ee,f),ee.forEach(d),$=X(P),I=_(P,"DIV",{});var se=v(I);k=_(se,"BUTTON",{class:!0});var M=v(k);b=ve(M,x),M.forEach(d),se.forEach(d),P.forEach(d),T=X(Y),N=_(Y,"DIV",{class:!0});var G=v(N);U.l(G),G.forEach(d),Y.forEach(d),A.forEach(d),this.h()},h(){c(a,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),c(r,"class","mr-2"),c(i,"class","flex-1 text-xl line-clamp-1"),c(k,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(l,"class","shrink-0 mt-1 mb-2 flex items-center"),c(N,"class","flex-1 w-full h-full max-h-full py-2.5 px-3.5 rounded-lg text-sm bg-transparent overflow-y-auto scrollbar-hidden"),c(t,"class","flex flex-col w-full h-full max-h-full"),c(e,"class","flex flex-col justify-start h-full max-h-full p-2")},m(w,A){S(w,e,A),p(e,t),p(t,l),p(l,r),p(r,a),O(n,a,null),p(l,o),p(l,i),p(i,u),p(l,$),p(l,I),p(I,k),p(k,b),p(t,T),p(t,N),U.m(N,null),C=!0,z||(y=[ie(a,"click",s[49]),ie(k,"click",s[50])],z=!0)},p(w,A){var Y,P;(!C||A[0]&1024)&&f!==(f=((P=(Y=w[10])==null?void 0:Y.meta)==null?void 0:P.name)+"")&&we(u,f),(!C||A[0]&4096)&&x!==(x=w[12].t("Save")+"")&&we(b,x),A[0]&1024&&Ce(W,W=w[10].id)?(Ne(),V(U,1,1,de),Me(),U=gt(w),U.c(),D(U,1),U.m(N,null)):U.p(w,A)},i(w){C||(D(n.$$.fragment,w),D(U),C=!0)},o(w){V(n.$$.fragment,w),V(U),C=!1},d(w){w&&d(e),j(n),U.d(w),z=!1,rt(y)}}}function Pl(s){let e,t,l=s[12].t("Drag and drop a file to upload or select a file to view")+"",r;return{c(){e=g("div"),t=g("div"),r=_e(l),this.h()},l(a){e=_(a,"DIV",{class:!0});var n=v(e);t=_(n,"DIV",{class:!0});var o=v(t);r=ve(o,l),o.forEach(d),n.forEach(d),this.h()},h(){c(t,"class","m-auto text-xs text-center text-gray-200 dark:text-gray-700"),c(e,"class","h-full flex w-full")},m(a,n){S(a,e,n),p(e,t),p(t,r)},p(a,n){n[0]&4096&&l!==(l=a[12].t("Drag and drop a file to upload or select a file to view")+"")&&we(r,l)},i:de,o:de,d(a){a&&d(e)}}}function Ll(s){var U,Q;let e,t,l,r,a,n=((Q=(U=s[10])==null?void 0:U.meta)==null?void 0:Q.name)+"",o,i,f,u,$,I=s[12].t("Save")+"",k,x,b,T=s[10].id,N,W,C,z=!Ol,y=_t(s);return{c(){e=g("div"),t=g("div"),l=R(),r=g("div"),a=g("a"),o=_e(n),f=R(),u=g("div"),$=g("button"),k=_e(I),x=R(),b=g("div"),y.c(),this.h()},l(m){e=_(m,"DIV",{class:!0});var w=v(e);t=_(w,"DIV",{class:!0});var A=v(t);l=X(A),r=_(A,"DIV",{class:!0});var Y=v(r);a=_(Y,"A",{class:!0,href:!0,target:!0});var P=v(a);o=ve(P,n),P.forEach(d),Y.forEach(d),f=X(A),u=_(A,"DIV",{});var oe=v(u);$=_(oe,"BUTTON",{class:!0});var ge=v($);k=ve(ge,I),ge.forEach(d),oe.forEach(d),A.forEach(d),x=X(w),b=_(w,"DIV",{class:!0});var ee=v(b);y.l(ee),ee.forEach(d),w.forEach(d),this.h()},h(){c(a,"class","hover:text-gray-500 dark:hover:text-gray-100 hover:underline grow line-clamp-1"),c(a,"href",i=s[10].id?`/api/v1/files/${s[10].id}/content`:"#"),c(a,"target","_blank"),c(r,"class","flex-1 text-xl font-medium"),c($,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(t,"class","shrink-0 mb-2 flex items-center"),c(b,"class","flex-1 w-full h-full max-h-full text-sm bg-transparent outline-hidden overflow-y-auto scrollbar-hidden"),c(e,"class","flex flex-col w-full h-full max-h-full")},m(m,w){S(m,e,w),p(e,t),p(t,l),p(t,r),p(r,a),p(a,o),p(t,f),p(t,u),p(u,$),p($,k),p(e,x),p(e,b),y.m(b,null),N=!0,W||(C=ie($,"click",s[47]),W=!0)},p(m,w){var A,Y;(!N||w[0]&1024)&&n!==(n=((Y=(A=m[10])==null?void 0:A.meta)==null?void 0:Y.name)+"")&&we(o,n),(!N||w[0]&1024&&i!==(i=m[10].id?`/api/v1/files/${m[10].id}/content`:"#"))&&c(a,"href",i),(!N||w[0]&4096)&&I!==(I=m[12].t("Save")+"")&&we(k,I),w[0]&1024&&Ce(T,T=m[10].id)?(Ne(),V(y,1,1,de),Me(),y=_t(m),y.c(),D(y,1),y.m(b,null)):y.p(m,w)},i(m){N||(D(z),D(y),N=!0)},o(m){V(z),V(y),N=!1},d(m){m&&d(e),y.d(m),W=!1,C()}}}function _t(s){let e,t,l;function r(n){s[48](n)}let a={className:"input-prose-sm",placeholder:s[12].t("Add content here"),preserveBreaks:!0};return s[10].data.content!==void 0&&(a.value=s[10].data.content),e=new ct({props:a}),xe.push(()=>Fe(e,"value",r)),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,o){O(e,n,o),l=!0},p(n,o){const i={};o[0]&4096&&(i.placeholder=n[12].t("Add content here")),!t&&o[0]&1024&&(t=!0,i.value=n[10].data.content,Ve(()=>t=!1)),e.$set(i)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function Kl(s){let e,t,l,r,a,n,o,i,f,u,$,I,k,x,b,T=s[11]&&pt(s);function N(m){s[25](m)}let W={message:s[12].t("This will reset the knowledge base and sync all files. Do you wish to continue?")};s[6]!==void 0&&(W.show=s[6]),t=new Gt({props:W}),xe.push(()=>Fe(t,"show",N)),t.$on("confirm",s[26]);function C(m){s[27](m)}let z={};s[5]!==void 0&&(z.show=s[5]),a=new Nl({props:z}),xe.push(()=>Fe(a,"show",C)),a.$on("submit",s[28]);const y=[Sl,Bl],U=[];function Q(m,w){return m[4]&&m[0]?0:1}return $=Q(s),I=U[$]=y[$](s),{c(){T&&T.c(),e=R(),L(t.$$.fragment),r=R(),L(a.$$.fragment),o=R(),i=g("input"),f=R(),u=g("div"),I.c(),this.h()},l(m){T&&T.l(m),e=X(m),K(t.$$.fragment,m),r=X(m),K(a.$$.fragment,m),o=X(m),i=_(m,"INPUT",{id:!0,type:!0}),f=X(m),u=_(m,"DIV",{class:!0,id:!0});var w=v(u);I.l(w),w.forEach(d),this.h()},h(){c(i,"id","files-input"),c(i,"type","file"),i.multiple=!0,i.hidden=!0,c(u,"class","flex flex-col w-full translate-y-1"),c(u,"id","collection-container")},m(m,w){T&&T.m(m,w),S(m,e,w),O(t,m,w),S(m,r,w),O(a,m,w),S(m,o,w),S(m,i,w),S(m,f,w),S(m,u,w),U[$].m(u,null),k=!0,x||(b=[ie(i,"change",s[29]),ie(i,"change",s[30])],x=!0)},p(m,w){m[11]?T?(T.p(m,w),w[0]&2048&&D(T,1)):(T=pt(m),T.c(),D(T,1),T.m(e.parentNode,e)):T&&(Ne(),V(T,1,1,()=>{T=null}),Me());const A={};w[0]&4096&&(A.message=m[12].t("This will reset the knowledge base and sync all files. Do you wish to continue?")),!l&&w[0]&64&&(l=!0,A.show=m[6],Ve(()=>l=!1)),t.$set(A);const Y={};!n&&w[0]&32&&(n=!0,Y.show=m[5],Ve(()=>n=!1)),a.$set(Y);let P=$;$=Q(m),$===P?U[$].p(m,w):(Ne(),V(U[P],1,1,()=>{U[P]=null}),Me(),I=U[$],I?I.p(m,w):(I=U[$]=y[$](m),I.c()),D(I,1),I.m(u,null))},i(m){k||(D(T),D(t.$$.fragment,m),D(a.$$.fragment,m),D(I),k=!0)},o(m){V(T),V(t.$$.fragment,m),V(a.$$.fragment,m),V(I),k=!1},d(m){m&&(d(e),d(r),d(o),d(i),d(f),d(u)),T&&T.d(m),j(t,m),j(a,m),U[$].d(),x=!1,rt(b)}}}let Ol=!0;function jl(s,e,t){let l,r,a;qe(s,Et,h=>t(56,l=h)),qe(s,Dt,h=>t(13,a=h));const n=it("i18n");qe(s,n,h=>t(12,r=h));let o=!0,i,f=null,u=null,$="",I=!1,k=!1,x=!1,b=null,T=[],N=null,W=null,C=null,z=null,y,U=!1;const Q=(h,F)=>{const H=new Blob([F],{type:"text/plain"}),B=ut(H,`${h}.txt`);return console.log(B),B},m=async h=>{console.log(h);const F=Wt(),H={type:"file",file:"",id:null,url:"",name:h.name,size:h.size,status:"uploading",error:"",itemId:F};if(H.size==0)return J.error(r.t("You cannot upload an empty file.")),null;if(t(0,u.files=[...u.files??[],H],u),["audio/mpeg","audio/wav","audio/ogg","audio/x-m4a"].includes(h.type)){const B=await At(localStorage.token,h).catch(q=>(J.error(`${q}`),null));if(B){console.log(B);const q=new Blob([B.text],{type:"text/plain"});h=ut(q,`${h.name}.txt`)}}try{const B=await Vt(localStorage.token,h).catch(q=>(J.error(`${q}`),null));B?(console.log(B),t(0,u.files=u.files.map(q=>(q.itemId===F&&(q.id=B.id),delete q.itemId,q)),u),await se(B.id)):J.error(r.t("Failed to upload file."))}catch(B){J.error(`${B}`)}},w=()=>{document.getElementById("toggle-Class").classList.toggle("toggle-Class-zsk")},A=async()=>{const h="showDirectoryPicker"in window;try{h?await P():await oe()}catch(F){ge(F)}},Y=h=>h.split("/").some(F=>F.startsWith(".")),P=async()=>{const h=await window.showDirectoryPicker();let F=0,H=0;const B=()=>{const ne=H/F*100;J.info(`Upload Progress: ${H}/${F} (${ne.toFixed(2)}%)`)};async function q(ne){for await(const le of ne.values())le.name.startsWith(".")||(le.kind==="file"?F++:le.kind==="directory"&&(le.name.startsWith(".")||await q(le)))}async function pe(ne,le=""){for await(const De of ne.values()){if(De.name.startsWith("."))continue;const je=le?`${le}/${De.name}`:De.name;if(!Y(je))if(De.kind==="file"){const ft=await De.getFile(),vt=new File([ft],je,{type:ft.type});await m(vt),H++,B()}else De.kind==="directory"&&(De.name.startsWith(".")||await pe(De,je))}}await q(h),B(),F>0?await pe(h):console.log("No files to upload.")},oe=async()=>new Promise((h,F)=>{const H=document.createElement("input");H.type="file",H.webkitdirectory=!0,H.directory=!0,H.multiple=!0,H.style.display="none",document.body.appendChild(H),H.onchange=async()=>{try{const B=Array.from(H.files).filter(le=>!Y(le.webkitRelativePath));let q=B.length,pe=0;const ne=()=>{const le=pe/q*100;J.info(`Upload Progress: ${pe}/${q} (${le.toFixed(2)}%)`)};ne();for(const le of B)if(!le.name.startsWith(".")){const De=le.webkitRelativePath||le.name,je=new File([le],De,{type:le.type});await m(je),pe++,ne()}document.body.removeChild(H),h()}catch(B){F(B)}},H.onerror=B=>{document.body.removeChild(H),F(B)},H.click()}),ge=h=>{h.name==="AbortError"?J.info("Directory selection was cancelled"):(J.error("Error accessing directory"),console.error("Directory access error:",h))},ee=async()=>{if(((u==null?void 0:u.files)??[]).length>0){const h=await Tt(localStorage.token,f).catch(F=>{J.error(`${F}`)});h&&(t(0,u=h),J.success(r.t("Knowledge reset successfully.")),A())}else A()},se=async h=>{const F=await Nt(localStorage.token,f,h).catch(H=>(J.error(`${H}`),null));F?(t(0,u=F),J.success(r.t("File added successfully."))):(J.error(r.t("Failed to add file.")),t(0,u.files=u.files.filter(H=>H.id!==h),u))},M=async h=>{try{console.log("Starting file deletion process for:",h);const F=await Mt(localStorage.token,f,h);console.log("Knowledge base updated:",F),F&&(t(0,u=F),J.success(r.t("File removed successfully.")))}catch(F){console.error("Error in deleteFileHandler:",F),J.error(`${F}`)}},G=async()=>{const h=N.id,F=N.data.content,H=Ft(localStorage.token,h,F).catch(q=>{J.error(`${q}`)}),B=await Bt(localStorage.token,f,h).catch(q=>{J.error(`${q}`)});H&&B&&(t(0,u=B),J.success(r.t("File content updated successfully.")))},ce=()=>{console.log("debounce"),z&&clearTimeout(z),z=setTimeout(async()=>{if(u.name.trim()===""||u.description.trim()===""){J.error(r.t("Please fill in all fields."));return}await St(localStorage.token,f,{...u,name:u.name,description:u.description,access_control:u.access_control}).catch(F=>{J.error(`${F}`)})&&(J.success(r.t("Knowledge updated successfully")),xt.set(await zt(localStorage.token)))},1e3)},re=async h=>{h.matches?t(3,o=!0):t(3,o=!1)},he=h=>{var F,H;h.preventDefault(),(H=(F=h.dataTransfer)==null?void 0:F.types)!=null&&H.includes("Files")?t(11,U=!0):t(11,U=!1)},me=()=>{t(11,U=!1)},be=async h=>{var F,H,B,q;if(h.preventDefault(),t(11,U=!1),(H=(F=h.dataTransfer)==null?void 0:F.types)!=null&&H.includes("Files")&&(B=h.dataTransfer)!=null&&B.files){const pe=(q=h.dataTransfer)==null?void 0:q.files;if(pe&&pe.length>0)for(const ne of pe)await m(ne);else J.error(r.t("File not found."))}};bt(async()=>{y=window.matchMedia("(min-width: 1024px)"),y.addEventListener("change",re),re(y);const h=document.getElementById("collection-container");o&&Math.floor(300/h.clientWidth*100),new ResizeObserver(q=>{for(let pe of q)pe.contentRect.width}).observe(h),t(4,f=l.params.id);const H=await Ct(localStorage.token,f).catch(q=>(J.error(`${q}`),null));H?t(0,u=H):It("/workspace/knowledge");const B=document.querySelector("body");B==null||B.addEventListener("dragover",he),B==null||B.addEventListener("drop",be),B==null||B.addEventListener("dragleave",me)}),kt(()=>{y==null||y.removeEventListener("change",re);const h=document.querySelector("body");h==null||h.removeEventListener("dragover",he),h==null||h.removeEventListener("drop",be),h==null||h.removeEventListener("dragleave",me)});function Be(h){k=h,t(6,k)}const fe=()=>{ee()};function ue(h){I=h,t(5,I)}const $e=h=>{const F=Q(h.detail.name,h.detail.content);m(F)};function Se(){b=this.files,t(8,b)}const te=async()=>{if(b&&b.length>0){for(const F of b)await m(F);t(8,b=null);const h=document.getElementById("files-input");h&&(h.value="")}else J.error(r.t("File not found."))},ae=()=>{ce()};function Te(h){x=h,t(7,x)}function Ke(h){s.$$.not_equal(u.access_control,h)&&(u.access_control=h,t(0,u))}function Re(){u.name=this.value,t(0,u)}const nt=()=>{ce()},ot=()=>{t(7,x=!0)};function Oe(){u.description=this.value,t(0,u)}const Xe=()=>{ce()};function ke(){$=this.value,t(1,$)}const Qe=()=>{t(2,W=null)},Ye=h=>{h.detail.type==="directory"?A():h.detail.type==="text"?t(5,I=!0):document.getElementById("files-input").click()},ye=h=>{t(6,k=!0)},Ge=()=>{w()},E=h=>{t(2,W=W===h.detail?null:h.detail)},Z=h=>{console.log(h.detail),t(2,W=null),M(h.detail)},ze=()=>{i.expand()},Ie=()=>{G()};function Ee(h){s.$$.not_equal(N.data.content,h)&&(N.data.content=h,t(10,N),t(2,W),t(0,u))}const Je=()=>{t(2,W=null)},Ze=()=>{G()};function He(h){s.$$.not_equal(N.data.content,h)&&(N.data.content=h,t(10,N),t(2,W),t(0,u))}const et=()=>{t(2,W=null)};return s.$$.update=()=>{if(s.$$.dirty[0]&1&&u&&u.files&&t(24,C=new yt(u.files,{keys:["meta.name","meta.description"]})),s.$$.dirty[0]&16777219&&C&&t(9,T=$?C.search($).map(h=>h.item):(u==null?void 0:u.files)??[]),s.$$.dirty[0]&5)if(W){const h=((u==null?void 0:u.files)??[]).find(F=>F.id===W);h?(h.data=h.data??{content:""},t(10,N=h)):t(10,N=null)}else t(10,N=null)},[u,$,W,o,f,I,k,x,b,T,N,U,r,a,n,i,Q,m,w,A,ee,M,G,ce,C,Be,fe,ue,$e,Se,te,ae,Te,Ke,Re,nt,ot,Oe,Xe,ke,Qe,Ye,ye,Ge,E,Z,ze,Ie,Ee,Je,Ze,He,et]}class ql extends We{constructor(e){super(),Ue(this,e,jl,Kl,Ce,{},null,[-1,-1,-1])}}function Rl(s){let e,t;return e=new ql({}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){O(e,l,r),t=!0},p:de,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}class yr extends We{constructor(e){super(),Ue(this,e,null,Rl,Ce,{})}}export{yr as component};
//# sourceMappingURL=25.DvTSp9oa.js.map
