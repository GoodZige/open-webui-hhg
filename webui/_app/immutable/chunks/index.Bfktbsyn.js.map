{"version":3,"file":"index.Bfktbsyn.js","sources":["../../../../../../src/lib/apis/users/index.ts"],"sourcesContent":["import { WEBUI_API_BASE_URL } from '$lib/constants';\nimport { getUserPosition } from '$lib/utils';\n\nexport const getUserGroups = async (token: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/users/groups`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getUserDefaultPermissions = async (token: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/users/default/permissions`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const updateUserDefaultPermissions = async (token: string, permissions: object) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/users/default/permissions`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\t...permissions\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\nlet user_session = null;\nlet users = null;\nexport const pushManyUser = async (email: string) => {\n\tlet error = null;\n\n\tconst newUser = {\n\t\tusername: email.split(\"@\")[0]\n\t};\n\n\tconst res = await fetch('/api_self/push_new_user', {\n\t\tmethod: 'POST', // 指定请求方法\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json' // 设置请求头\n\t\t},\n\t\tbody: JSON.stringify(newUser) // 将JavaScript对象转换为JSON字符串\n\t})\n\t\t.then(response => {\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error('服务响应异常');\n\t\t\t}\n\t\t\treturn response.json(); // 解析JSON响应\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.error('Error:', err); // 出错时处理错误\n\t\t\terror = err.detail;\n\t\t\treturn null\n\t\t});\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\t\n\t\treturn res;\n}\nexport const popManyUser = async (email: string) => {\n\tlet error = null;\n\n\tconst newUser = {\n\t\tusername: email.split(\"@\")[0]\n\t};\n\n\tconst res = await fetch('/api_self/pop_new_user', {\n\t\tmethod: 'POST', // 指定请求方法\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json' // 设置请求头\n\t\t},\n\t\tbody: JSON.stringify(newUser) // 将JavaScript对象转换为JSON字符串\n\t})\n\t\t.then(response => {\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error('服务响应异常');\n\t\t\t}\n\t\t\treturn response.json(); // 解析JSON响应\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.error('Error:', err); // 出错时处理错误\n\t\t\terror = err.detail;\n\t\t\treturn null\n\t\t});\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\t\n\t\treturn res;\n}\n\n// export const pushManyUser = async (email: string) => {\n// \tlet error = null;\n\n// \tif (user_session) {\n// \t\t// 人员同步\n// \t\tconst res_person = await fetch(`https://portal.huanghuaport.com.cn/unifyinterface/main/org/queryemplist`, {\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Cookie': `user_session=${user_session}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\tid: id,\n// \t\t\t\trole: role\n// \t\t\t})\n// \t\t})\n// \t\t\t.then(async (res) => {\n// \t\t\t\tif (!res.ok) throw await res.json();\n// \t\t\t\treturn res.json();\n// \t\t\t})\n// \t\t\t.catch((err) => {\n// \t\t\t\tconsole.log(err);\n// \t\t\t\terror = err.detail;\n// \t\t\t\treturn null;\n// \t\t\t});\n\n// \t\tif (error) {\n// \t\t\tthrow error;\n// \t\t}\n// \t\tusers = res_person.dataList || [];\n// \t\t// 筛选用户\n// \t\tconst appData = users.filter(user => {\n// \t\t\tif(user.username.length === 8){\n// \t\t\t\tif(user.username.startWith(\"1\") || user.username.startWith(\"2\")){\n// \t\t\t\t\treturn true\n// \t\t\t\t}else{\n// \t\t\t\t\treturn false\n// \t\t\t\t}\n// \t\t\t}else{\n// \t\t\t\treturn false\n// \t\t\t}\n// \t\t}).map(user=>{\n// \t\t\treturn {clientId: \"Ai\", userId: user.username}\n// \t\t})\n// \t\t// 添加当前用户\n// \t\tappData.push({clientId: \"Ai\", userId: email.split(\"@\")[0]})\n//     \tconst payload = JSON.stringify({\"appData\": JSON.stringify(appData)});\n\n// \t\t// app_data = [{\"clientId\": \"\", \"userId\": user} for user in users]\n// \t\t// payload = {\"appData\": str(app_data)}\n// \t\tconst res = await fetch(`https://portal.huanghuaport.com.cn/unifyinterface/main/commonfun/getappdata`, {\n// \t\t\tmethod: 'POST',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Cookie': `user_session=${user_session}`\n// \t\t\t},\n// \t\t\tbody: payload\n// \t\t})\n// \t\t\t.then(async (res) => {\n// \t\t\t\tif (!res.ok) throw await res.json();\n// \t\t\t\treturn res.json();\n// \t\t\t})\n// \t\t\t.catch((err) => {\n// \t\t\t\tconsole.log(err);\n// \t\t\t\terror = err.detail;\n// \t\t\t\treturn null;\n// \t\t\t});\n\n// \t\tif (error) {\n// \t\t\tthrow error;\n// \t\t}\n\n// \t\treturn res;\n\n// \t} else {\n// \t\tconst loginForm = new URLSearchParams({\n// \t\t\t'username': 'Ai',\n// \t\t\t'password': 'aSDF1@#$'\n// \t\t});\n// \t\tconst res_login = await fetch(`https://portal.huanghuaport.com.cn/login`, {\n// \t\t\tmethod: 'POST',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n// \t\t\t},\n// \t\t\tbody: loginForm\n// \t\t})\n// \t\t\t.then(async (res) => {\n// \t\t\t\tconsole.log(res);\n// \t\t\t\tif (res.headers != null) {\n// \t\t\t\t\tuser_session = res.headers.get('Set-Cookie')?.match(/user_session=([^;]*)/)?.[1];\n// \t\t\t\t}\n// \t\t\t\treturn res\n// \t\t\t})\n// \t\t\t.catch((err) => {\n// \t\t\t\tconsole.log(err);\n// \t\t\t\terror = err.detail;\n// \t\t\t\treturn null;\n// \t\t\t});\n\n// \t\tif (error) {\n// \t\t\tthrow error;\n// \t\t}\n// \t}\n\n\n\n\n// };\n\nexport const updateUserRole = async (token: string, id: string, role: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/users/update/role`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tid: id,\n\t\t\trole: role\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getUsers = async (token: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/users/`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res ? res : [];\n};\n\nexport const getUserSettings = async (token: string) => {\n\tlet error = null;\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/users/user/settings`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const updateUserSettings = async (token: string, settings: object) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/users/user/settings/update`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\t...settings\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getUserById = async (token: string, userId: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/users/${userId}`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getUserInfo = async (token: string) => {\n\tlet error = null;\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/users/user/info`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const updateUserInfo = async (token: string, info: object) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/users/user/info/update`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\t...info\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getAndUpdateUserLocation = async (token: string) => {\n\tconst location = await getUserPosition().catch((err) => {\n\t\tconsole.log(err);\n\t\treturn null;\n\t});\n\n\tif (location) {\n\t\tawait updateUserInfo(token, { location: location });\n\t\treturn location;\n\t} else {\n\t\tconsole.log('Failed to get user location');\n\t\treturn null;\n\t}\n};\n\nexport const deleteUserById = async (token: string, userId: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/users/${userId}`, {\n\t\tmethod: 'DELETE',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\ntype UserUpdateForm = {\n\tprofile_image_url: string;\n\temail: string;\n\tname: string;\n\tpassword: string;\n};\n\nexport const updateUserById = async (token: string, userId: string, user: UserUpdateForm) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/users/${userId}/update`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tprofile_image_url: user.profile_image_url,\n\t\t\temail: user.email,\n\t\t\tname: user.name,\n\t\t\tpassword: user.password !== '' ? user.password : undefined\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n"],"names":["getUserDefaultPermissions","token","error","res","WEBUI_API_BASE_URL","err","updateUserDefaultPermissions","permissions","pushManyUser","email","newUser","response","popManyUser","updateUserRole","id","role","getUsers","getUserSettings","updateUserSettings","settings","getUserById","userId","updateUserInfo","info","getAndUpdateUserLocation","location","getUserPosition","deleteUserById","updateUserById","user"],"mappings":"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"}